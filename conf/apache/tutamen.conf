<VirtualHost _default_:80>

    # VirtualHost Setup
    ServerName <server_name>
    ServerAdmin <admin_name>

    # Logging Setup
    LogLevel warn
    ErrorLog ${APACHE_LOG_DIR}/tutamen_error.log
    CustomLog ${APACHE_LOG_DIR}/tutamen_access.log combined

    # Redirect to SSL
    Redirect temp / https://<URL>/

</VirtualHost>

<VirtualHost _default_:443>

    # VirtualHost Setup
    ServerName <server_name>
    ServerAdmin <admin_email>
    DocumentRoot "<root_dir>"

    # Logging Setup
    LogLevel warn
    ErrorLog ${APACHE_LOG_DIR}/tutamen_error.log
    CustomLog ${APACHE_LOG_DIR}/tutamen_access.log combined

    # SSL Server Setup
    SSLEngine on
    SSLCertificateFile      /etc/ssl/certs/<server>.crt
    SSLCertificateKeyFile   /etc/ssl/private/<server>.key
    SSLCertificateChainFile /etc/ssl/certs/<chain>.crt

    # SSL Client Setup
    SSLVerifyClient require
    SSLVerifyDepth 2
    SSLCACertificateFile "/etc/ssl/ca/<client-ca-chain>.crt"

    # WSGI Setup
    WSGIDaemonProcess tutamen-api home=/tmp \
                      processes=1 threads=10 \
                      display-name=%{GROUP} \
                      python-path="<root_dir>"
    WSGIProcessGroup tutamen-api
    WSGIApplicationGroup %{GLOBAL}
    WSGIScriptReloading On
    WSGIPassAuthorization On
    WSGIScriptAlias "/" "<root_dir>/api.wsgi"

    # Directory Setup
    <Directory "<root_dir>">
        Options +FollowSymLinks +MultiViews
        Options -Indexes
        AllowOverride None
        Require all granted
    </Directory>

</VirtualHost>
